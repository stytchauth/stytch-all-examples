<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stytch B2B Example App - Vanilla JS Prebuilt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="page-container">
      <div class="page-content">
        <div
          id="loading-container"
          class="flex justify-center items-center h-screen"
        >
          <div class="flex flex-col items-center gap-4">
            <div
              class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"
            ></div>
            <p class="text-gray-600">Loading session...</p>
          </div>
        </div>

        <div
          id="main-container"
          class="hidden flex flex-col lg:flex-row items-center gap-4 lg:gap-8 p-4 lg:p-16"
        >
          <div class="flex-1 min-w-0">
            <div class="flex flex-col gap-4 min-w-0 max-w-2xl">
              <h1 class="font-default text-h1 font-semibold pb-4 tracking-wide">
                A full session begins.
              </h1>
              <p class="font-default text-body1 tracking-normal">
                Your <i>Intermediate Session token</i> was exchanged for a fully
                realized
                <a
                  href="https://stytch.com/docs/b2b/api/session-object"
                  target="_blank"
                  class="font-semibold underline"
                  >Member Session</a
                >
                â€”meaning you're now fully authenticated for your app!
              </p>
              <p class="font-default text-body1 tracking-normal">
                Sessions are stored as
                <a
                  href="https://stytch.com/docs/b2b/guides/sessions/resources/jwts-vs-tokens"
                  target="_blank"
                  class="font-semibold underline"
                  >JWTs or session tokens</a
                >
                in browser cookies or mobile storage and let you authenticate
                and authorize requests between your client and server, for
                example:
              </p>
              <ul
                class="list-disc pl-4 space-y-3 ml-4 font-default text-body1 tracking-normal"
              >
                <li>
                  Use
                  <a
                    href="https://stytch.com/docs/b2b/sdks/session-management/exchange-session"
                    target="_blank"
                    class="font-semibold underline"
                    >Exchange session</a
                  >
                  to let Members switch between their Organizations without
                  having to re-login.
                </li>
                <li>
                  Extend a Member's session duration with
                  <a
                    href="https://stytch.com/docs/b2b/sdks/session-management/authenticate-session"
                    target="_blank"
                    class="font-semibold underline"
                    >Authenticate</a
                  >.
                </li>
                <li>
                  <a
                    href="https://stytch.com/docs/b2b/sdks/session-management/revoke-session"
                    target="_blank"
                    class="font-semibold underline"
                    >Revoke</a
                  >
                  a session on logout.
                </li>
              </ul>
              <div class="flex flex-col gap-1">
                <p class="font-default text-h4">Additional Resources</p>
                <div class="flex flex-row gap-2">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M16.6667 1.6665V18.3332H3.33337V1.6665H16.6667ZM10 8.33317H8.33337V9.99984H6.66671V3.33317H5.00004V16.6665H15V3.33317H11.6667V9.99984H10V8.33317Z"
                      fill="#1D1D1D"
                    />
                  </svg>
                  <a
                    href="https://stytch.com/docs/b2b/guides/sessions/resources/overview"
                    target="_blank"
                    class="font-default text-body1 underline"
                    >Sessions overview & how to use member sessions</a
                  >
                </div>
                <div class="flex flex-row gap-2">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M16.6667 1.6665V18.3332H3.33337V1.6665H16.6667ZM10 8.33317H8.33337V9.99984H6.66671V3.33317H5.00004V16.6665H15V3.33317H11.6667V9.99984H10V8.33317Z"
                      fill="#1D1D1D"
                    />
                  </svg>
                  <a
                    href="https://stytch.com/docs/b2b/sdks/resources/cookies-and-session-management"
                    target="_blank"
                    class="font-default text-body1 underline"
                    >Cookies & session management</a
                  >
                </div>
                <div class="flex flex-row gap-2">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M16.6667 1.6665V18.3332H3.33337V1.6665H16.6667ZM10 8.33317H8.33337V9.99984H6.66671V3.33317H5.00004V16.6665H15V3.33317H11.6667V9.99984H10V8.33317Z"
                      fill="#1D1D1D"
                    />
                  </svg>
                  <a
                    href="https://stytch.com/docs/b2b/guides/sessions/resources/jwts-vs-tokens"
                    target="_blank"
                    class="font-default text-body1 underline"
                    >JWTs vs session tokens</a
                  >
                </div>
              </div>
              <div
                class="relative w-full rounded-lg border px-4 py-3 text-sm bg-code"
              >
                <div class="font-default font-semibold tracking-tight mb-1">
                  Next steps
                </div>
                <div class="font-default text-body1 tracking-normal">
                  Try adding
                  <a
                    href="https://stytch.com/docs/b2b/guides/oauth/overview"
                    target="_blank"
                    class="font-semibold underline"
                    >OAuth</a
                  >
                  to your example app by enabling it in
                  <a
                    href="https://github.com/stytch/stytch-all-examples/blob/main/frontend/vanillajs/prebuilt/b2b/js/config.js"
                    target="_blank"
                    class="font-semibold underline"
                    >the config file</a
                  >.
                </div>
              </div>
            </div>
          </div>

          <div class="flex-1 min-w-0 flex flex-col items-center p-4 lg:p-16">
            <div
              id="main-card"
              class="w-lg border-dashed border-[3px] bg-transparent shadow-none rounded-xl border border-gray-200 py-6 flex flex-col gap-8"
            >
              <!-- CardHeader -->
              <div
                class="px-6 grid auto-rows-min grid-rows-[auto_auto] items-start"
              >
                <div class="flex flex-col gap-1 items-center">
                  <svg
                    width="48"
                    height="48"
                    viewBox="0 0 48 48"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M22.264 5.00797L14.264 19.008C14.0902 19.3121 13.9994 19.6565 14.0006 20.0067C14.0018 20.357 14.0949 20.7007 14.2707 21.0037C14.4465 21.3066 14.6987 21.5581 15.0022 21.7329C15.3057 21.9078 15.6497 21.9999 16 22H32C32.3502 21.9999 32.6943 21.9078 32.9977 21.7329C33.3012 21.5581 33.5535 21.3066 33.7292 21.0037C33.905 20.7007 33.9981 20.357 33.9993 20.0067C34.0005 19.6565 33.9097 19.3121 33.736 19.008L25.736 5.00797C25.561 4.70207 25.3082 4.44785 25.0034 4.27103C24.6985 4.09422 24.3524 4.0011 24 4.0011C23.6475 4.0011 23.3014 4.09422 22.9965 4.27103C22.6917 4.44785 22.439 4.70207 22.264 5.00797Z"
                      fill="black"
                    />
                    <path
                      d="M34 26C35.5652 26 37.096 26.4592 38.4029 27.3206C39.7097 28.182 40.7352 29.4079 41.3522 30.8464C41.9692 32.2848 42.1507 33.8727 41.8742 35.4133C41.5977 36.9539 40.8753 38.3795 39.7965 39.5136C38.7178 40.6477 37.3301 41.4405 35.8052 41.7937C34.2804 42.1469 32.6854 42.045 31.2179 41.5007C29.7504 40.9563 28.4748 39.9935 27.5491 38.7313C26.6234 37.4692 26.0883 35.9633 26.01 34.4L26 34L26.01 33.6C26.1126 31.5501 26.9992 29.618 28.4864 28.2034C29.9735 26.7889 31.9475 26 34 26Z"
                      fill="black"
                    />
                    <path
                      d="M18 26H10C8.93913 26 7.92172 26.4214 7.17157 27.1716C6.42143 27.9217 6 28.9391 6 30V38C6 39.0609 6.42143 40.0783 7.17157 40.8284C7.92172 41.5786 8.93913 42 10 42H18C19.0609 42 20.0783 41.5786 20.8284 40.8284C21.5786 40.0783 22 39.0609 22 38V30C22 28.9391 21.5786 27.9217 20.8284 27.1716C20.0783 26.4214 19.0609 26 18 26Z"
                      fill="black"
                    />
                  </svg>
                  <p class="text-gray-500 text-xs">Your App</p>
                </div>
                <h3 class="font-bold text-h2 justify-start font-system">
                  Logged in as:
                </h3>
              </div>

              <!-- CardContent -->
              <div class="px-6 flex flex-col gap-6 font-system">
                <div class="flex flex-col gap-6">
                  <div class="flex flex-col">
                    <p class="font-bold">Email</p>
                    <p id="email-display"></p>
                  </div>

                  <div class="flex flex-col">
                    <p class="font-bold">Member ID</p>
                    <p id="member-id-display"></p>
                  </div>

                  <div class="flex flex-col">
                    <p class="font-bold">Organization</p>
                    <p id="org-name-display"></p>
                  </div>
                </div>

                <div class="flex flex-row gap-2">
                  <button
                    id="view-token-btn"
                    class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-white text-black shadow-sm hover:bg-gray-100 h-9 px-4 py-2 has-[>svg]:px-3 border border-gray-200"
                  >
                    View Token
                  </button>
                  <button
                    id="logout-btn"
                    class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-black text-white shadow-xs hover:bg-gray-800 h-9 px-4 py-2 has-[>svg]:px-3"
                  >
                    Logout
                  </button>
                </div>
              </div>
            </div>

            <!-- Session Tokens Card (hidden by default) -->
            <div
              id="session-tokens-card"
              class="hidden w-lg border-dashed border-[3px] bg-transparent shadow-none rounded-xl border border-gray-200 py-6"
            >
              <div class="px-6 flex flex-col gap-6 font-system">
                <div class="flex flex-col gap-2">
                  <p class="font-bold">Session Token</p>
                  <div
                    class="border border-gray-200 rounded-md p-2 text-sm bg-code"
                  >
                    <code id="session-token-display"></code>
                  </div>
                </div>
                <div class="flex flex-col gap-2">
                  <p class="font-bold">Session JWT</p>
                  <div class="flex flex-row gap-2 justify-start">
                    <div class="flex-1">
                      <button
                        id="copy-jwt-btn"
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-white text-black shadow-sm hover:bg-gray-100 h-8 px-3 py-1 has-[>svg]:px-2 w-full border border-gray-200"
                      >
                        Copy JWT to clipboard
                      </button>
                    </div>
                    <div class="flex-1">
                      <button
                        id="launch-jwt-decoder-btn"
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-white text-black shadow-sm hover:bg-gray-100 h-8 px-3 py-1 has-[>svg]:px-2 w-full border border-gray-200"
                      >
                        Launch JWT decoder
                      </button>
                    </div>
                  </div>
                  <div
                    class="break-all text-sm leading-relaxed bg-code rounded-md p-2"
                  >
                    <code id="jwt-display"></code>
                  </div>
                </div>
                <button
                  id="back-to-session-btn"
                  class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-white text-black shadow-sm hover:bg-gray-100 h-9 px-4 py-2 has-[>svg]:px-3 w-fit self-start border border-gray-200"
                >
                  Back
                </button>
              </div>
            </div>

            <!-- Your own UI badge -->
            <div class="flex flex-col gap-4 items-center mt-4">
              <div class="relative group">
                <div
                  class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] transition-[color,box-shadow] overflow-hidden text-foreground hover:bg-accent hover:text-accent-foreground border-gray-200 cursor-default"
                >
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 48 48"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-3 pointer-events-none"
                  >
                    <path
                      d="M22.264 5.00797L14.264 19.008C14.0902 19.3121 13.9994 19.6565 14.0006 20.0067C14.0018 20.357 14.0949 20.7007 14.2707 21.0037C14.4465 21.3066 14.6987 21.5581 15.0022 21.7329C15.3057 21.9078 15.6497 21.9999 16 22H32C32.3502 21.9999 32.6943 21.9078 32.9977 21.7329C33.3012 21.5581 33.5535 21.3066 33.7292 21.0037C33.905 20.7007 33.9981 20.357 33.9993 20.0067C34.0005 19.6565 33.9097 19.3121 33.736 19.008L25.736 5.00797C25.561 4.70207 25.3082 4.44785 25.0034 4.27103C24.6985 4.09422 24.3524 4.0011 24 4.0011C23.6475 4.0011 23.3014 4.09422 22.9965 4.27103C22.6917 4.44785 22.439 4.70207 22.264 5.00797Z"
                      fill="currentColor"
                    />
                    <path
                      d="M34 26C35.5652 26 37.096 26.4592 38.4029 27.3206C39.7097 28.182 40.7352 29.4079 41.3522 30.8464C41.9692 32.2848 42.1507 33.8727 41.8742 35.4133C41.5977 36.9539 40.8753 38.3795 39.7965 39.5136C38.7178 40.6477 37.3301 41.4405 35.8052 41.7937C34.2804 42.1469 32.6854 42.045 31.2179 41.5007C29.7504 40.9563 28.4748 39.9935 27.5491 38.7313C26.6234 37.4692 26.0883 35.9633 26.01 34.4L26 34L26.01 33.6C26.1126 31.5501 26.9992 29.618 28.4864 28.2034C29.9735 26.7889 31.9475 26 34 26Z"
                      fill="currentColor"
                    />
                    <path
                      d="M18 26H10C8.93913 26 7.92172 26.4214 7.17157 27.1716C6.42143 27.9217 6 28.9391 6 30V38C6 39.0609 6.42143 40.0783 7.17157 40.8284C7.92172 41.5786 8.93913 42 10 42H18C19.0609 42 20.0783 41.5786 20.8284 40.8284C21.5786 40.0783 22 39.0609 22 38V30C22 28.9391 21.5786 27.9217 20.8284 27.1716C20.0783 26.4214 19.0609 26 18 26Z"
                      fill="currentColor"
                    />
                  </svg>
                  <p>Your own UI</p>
                </div>
                <!-- Tooltip -->
                <div
                  class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10"
                >
                  Not provided by Stytch UI components
                  <div
                    class="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          id="error-container"
          class="hidden flex justify-center items-center"
        >
          <!-- ErrorBox will be dynamically inserted here -->
        </div>
      </div>
    </div>

    <!-- Toast container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50"></div>

    <script type="module" src="js/view-session.js"></script>
  </body>
</html>
